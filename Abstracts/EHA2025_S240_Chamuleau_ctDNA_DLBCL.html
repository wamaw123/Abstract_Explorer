<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PXXX - Loncastuximab in R/R MZL (Lossos) - SOBI Themed</title>
    <meta name="study:id" content="loncastuximab-mzl-lossos-eha2025">
    <meta name="study:title" content="PXXX - Loncastuximab in R/R Marginal Zone Lymphoma">
    <meta name="study:fileName" content="Abstracts/Loncastuximab-MZL-Lossos-EHA2025.html">
    <meta name="study:cancerTypes" content="MZL,B-NHL">
    <meta name="study:lineOfTherapy" content="2L+">
    <meta name="study:evidenceType" content="Clinical trial">
    <meta name="study:drugs" content="Loncastuximab tesirine,ADC">

    <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
    <script src="[https://d3js.org/d3.v7.min.js](https://d3js.org/d3.v7.min.js)"></script>
    <link href="[https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap)" rel="stylesheet">
    <link rel="stylesheet" href="abstract_styles.css">
</head>
<body class="abstract-page-body">
    <div class="slide-container">
        <div class="visual-abstract-container">
            <h2 class="visual-abstract-title">Visual Summary: PXXX - Loncastuximab in R/R Marginal Zone Lymphoma</h2>
            <div class="visual-abstract-grid">
                <div class="visual-abstract-item">
                    <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24" fill="var(--sobi-teal)"><path d="M12 6.096c-1.058 0-2.02.468-2.704 1.248-.685.78-.996 1.788-.996 2.856s.311 2.076.996 2.856C9.98 13.84 10.942 14.31 12 14.31s2.02-.468 2.704-1.248.996-1.788.996-2.856-.311-2.076-.996-2.856C14.02 6.564 13.058 6.096 12 6.096zM12 12.81c-.53 0-1.008-.222-1.352-.588-.344-.366-.528-.852-.528-1.422s.184-1.056.528-1.422C10.992 9.012 11.47 8.79 12 8.79s1.008.222 1.352.588.528.852.528 1.422-.184-1.056-.528-1.422C13.008 12.588 12.53 12.81 12 12.81zm6.708 3.672A7.47 7.47 0 0012.024 15c-1.404 0-2.706.39-3.816 1.056A4.476 4.476 0 004.5 19.686V21h15v-1.314a4.476 4.476 0 00-3.792-3.624zM6.024 16.56c.84-.468 1.848-.768 2.904-.924A5.928 5.928 0 0112.024 15a5.928 5.928 0 013.096.636c1.056.156 2.064.456 2.904.924A2.988 2.988 0 0019.5 18.018V19.5h-15v-1.482a2.988 2.988 0 001.524-2.458zM4.5 7.032c0-1.068.312-2.076.996-2.856S7.2 3 8.256 3A7.47 7.47 0 0112.024 1.5c1.404 0 2.706.39 3.816 1.056A4.476 4.476 0 0119.5 6.186V7.5H4.5v-.468zM18 4.56c-.84.468-1.848-.768-2.904-.924A5.928 5.928 0 0012.024 6a5.928 5.928 0 00-3.096.636 7.524 7.524 0 00-2.904.924A2.988 2.988 0 014.5 7.482V6H3V4.5A1.5 1.5 0 014.5 3h15A1.5 1.5 0 0121 4.5V6h-1.5v1.482a2.988 2.988 0 01-1.524 2.458L18 4.56z" /></svg>
                    <h4>Population & Aim (N=27)</h4>
                    <p>Adults with R/R MZL (≥1 prior line). Aim: Safety & efficacy of Loncastuximab (Lonca).</p>
                </div>
                <div class="visual-abstract-item">
                    <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24" fill="var(--sobi-teal)"><path fill-rule="evenodd" d="M10.5 3.75a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75V4.5h3A2.25 2.25 0 0118.75 6.75v1.5a2.25 2.25 0 01-2.25 2.25H15.5V12h1.25a.75.75 0 010 1.5H15.5v1.5h.75a.75.75 0 010 1.5H15.5v1.5H18a.75.75 0 010 1.5h-2.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0v-3A2.25 2.25 0 016 14.25v-1.5A2.25 2.25 0 018.25 10.5H9.5V9H8.25A2.25 2.25 0 016 6.75v-1.5A2.25 2.25 0 018.25 3H10.5V3.75zm-1.5 6.75h6V6.75H9V10.5z" clip-rule="evenodd" /></svg>
                    <h4>Intervention (Lonca Monotherapy)</h4>
                    <p>Lonca 0.15 mg/kg IV Q3W x2 cycles, then 0.075 mg/kg IV Q3W x4 cycles. Phase 2.</p>
                </div>
                <div class="visual-abstract-item">
                     <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24" fill="var(--sobi-orange)"><path d="M3 13.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 13.5zM3 8.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 8.25zM3 18.75a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 18.75zM20.25 3a.75.75 0 00-.75.75v16.5a.75.75 0 001.5 0V3.75a.75.75 0 00-.75-.75z" /><path fill-rule="evenodd" d="M9.97 4.28a.75.75 0 01.75-.75H12a.75.75 0 01.75.75v10.174l3.108-3.293a.75.75 0 111.084 1.038l-4.5 4.75a.75.75 0 01-1.084 0l-4.5-4.75a.75.75 0 111.084-1.038L9.97 14.454V4.28z" clip-rule="evenodd" /></svg>
                    <h4>Key Efficacy (N=26 Evaluable)</h4>
                    <p>ORR: <span class="highlight-value">85%</span><br>CRR: <span class="highlight-value">69%</span><br>12-mo PFS: 91.7%</p>
                </div>
                <div class="visual-abstract-item">
                    <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 24 24" fill="var(--sobi-orange)"><path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-.092 14.444a.75.75 0 01-.092 0l-3.75-3.75a.75.75 0 111.06-1.06L12 14.813l3.182-3.182a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-.53.22z" clip-rule="evenodd" /></svg>
                    <h4>Safety & Conclusion</h4>
                    <p>Well tolerated, manageable safety. Lonca shows robust, durable responses. Longer f/u needed.</p>
                </div>
            </div>
        </div>
        
        <div class="text-center mb-8">
            <h1 class="abstract-header-title">PXXX - Updated analysis of a phase 2 multicenter study of loncastuximab in relapsed/refractory marginal zone lymphoma demonstrates high rate of complete responses</h1>
            <p class="abstract-sub-header">Izidore S. Lossos, Geoffrey Shouse, Kristen Lucas, Jean L. Koff, Isildinha M. Reis, Russ A. Kuker, Juan P. Alderuccio</p>
            <p class="abstract-meta-info mt-2">EHA 2025 Congress | Abstract #PXXX (Placeholder) | Data Cutoff: Feb 10, 2025 | Presentation Date: June 12-15, 2025</p>
        </div>

        <div class="grid md:grid-cols-2 gap-x-8 gap-y-6">
            <div class="abstract-card">
                <h2 class="abstract-section-title">Background</h2>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li>Marginal zone lymphoma (MZL) is a heterogeneous B-cell malignancy, representing about 7% of non-Hodgkin lymphomas.</li>
                    <li>In the relapsed/refractory (R/R) setting, there is no established standard of care, and achieving a complete response (CR) is often infrequent.</li>
                </ul>
            </div>

            <div class="abstract-card">
                <h2 class="abstract-section-title">Aims</h2>
                <p class="text-sm">To report on an ongoing, open-label, multi-institutional, investigator-initiated study (NCT05296070) evaluating the safety and efficacy of loncastuximab tesirine (Lonca), a CD19-directed antibody-drug conjugate, in patients with R/R MZL.</p>
            </div>

            <div class="abstract-card md:col-span-2">
                <h2 class="abstract-section-title">Methods & Study Design</h2>
                <ul class="list-disc list-inside text-sm space-y-1 mb-3 pl-2">
                    <li>Study Type: Phase 2, open-label, multi-institutional, investigator-initiated trial (NCT05296070).</li>
                    <li>Patient Population: Adults with R/R MZL who had received ≥1 line of systemic therapy, were symptomatic, met predefined criteria for an MZL subtype, or experienced Progression of Disease within 24 months (POD24).</li>
                    <li>Treatment Regimen: Loncastuximab tesirine 0.15 mg/kg IV Q3W for 2 cycles, followed by 0.075 mg/kg IV Q3W for 4 cycles. Premedication with dexamethasone (4 mg twice daily for 3 days) and prophylaxis to prevent fluid overload with spironolactone (100 mg) was required.</li>
                    <li>Primary Endpoint: Complete Response (CR) rate after 6 cycles of therapy, assessed using PET-CT (or MRI/CT if PET-CT not feasible) per Lugano 2014 criteria.</li>
                    <li>Data Cutoff: February 10, 2025.</li>
                </ul>
                <div class="study-design-schema">
                    <h3 class="schema-title">Loncastuximab Tesirine (Lonca) Treatment Schema for R/R MZL</h3>
                    <div class="schema-enrollment">
                        <strong>Eligible Patients (N=27)</strong>
                        <span>R/R MZL, ≥1 Prior Line</span>
                    </div>
                    <div class="schema-arrow-down">▼</div>
                    <div class="schema-phase-group">
                        <div class="schema-phase" style="flex-basis: 48%;">
                            <strong>Cycles 1-2 (Q3W)</strong>
                            <span>Lonca 0.15 mg/kg IV</span>
                        </div>
                        <div class="schema-arrow text-2xl self-center mx-2">➔</div>
                        <div class="schema-phase" style="flex-basis: 48%;">
                            <strong>Cycles 3-6 (Q3W)</strong>
                            <span>Lonca 0.075 mg/kg IV</span>
                        </div>
                    </div>
                     <div class="schema-arrow-down">▼</div>
                    <div class="schema-assessment-points">
                       <span>Primary EP: CR Rate (Post-C6)</span>
                       <span>Secondary EPs: ORR, DOR, PFS, OS, Safety</span>
                    </div>
                </div>
            </div>
            
            <div class="abstract-card">
                <h2 class="abstract-section-title">Patient Characteristics (N=27)</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th class="px-4 py-2">Characteristic</th><th class="px-4 py-2">Value</th></tr>
                        </thead>
                        <tbody>
                            <tr><td class="border px-4 py-2">Median Age, years (range)</td><td class="border px-4 py-2">67 (44-82)</td></tr>
                            <tr><td class="border px-4 py-2">Gender M:F</td><td class="border px-4 py-2">8:19</td></tr>
                            <tr><td class="border px-4 py-2">Asian, n (%)</td><td class="border px-4 py-2">2 (7%)</td></tr>
                            <tr><td class="border px-4 py-2">Black non-Hispanic, n (%)</td><td class="border px-4 py-2">1 (4%)</td></tr>
                            <tr><td class="border px-4 py-2">White Hispanic, n (%)</td><td class="border px-4 py-2">11 (41%)</td></tr>
                            <tr><td class="border px-4 py-2">White non-Hispanic, n (%)</td><td class="border px-4 py-2">13 (48%)</td></tr>
                            <tr><td class="border px-4 py-2"><strong>MZL Subtype, n (%)</strong></td><td class="border px-4 py-2"></td></tr>
                            <tr><td class="border px-4 py-2 pl-8">Extranodal (EMZL)</td><td class="border px-4 py-2">16 (59%)</td></tr>
                            <tr><td class="border px-4 py-2 pl-8">Nodal (NMZL)</td><td class="border px-4 py-2">7 (26%)</td></tr>
                            <tr><td class="border px-4 py-2 pl-8">Splenic (SMZL)</td><td class="border px-4 py-2">4 (15%)</td></tr>
                            <tr><td class="border px-4 py-2">Stage I, n (%)</td><td class="border px-4 py-2">4 (15%)</td></tr>
                            <tr><td class="border px-4 py-2">Stage III, n (%)</td><td class="border px-4 py-2">2 (7%)</td></tr>
                            <tr><td class="border px-4 py-2">Stage IV, n (%)</td><td class="border px-4 py-2">21 (78%)</td></tr>
                            <tr><td class="border px-4 py-2">ECOG PS 0-1, n (%)</td><td class="border px-4 py-2">27 (100%)</td></tr>
                            <tr><td class="border px-4 py-2">POD24, n (%)</td><td class="border px-4 py-2">13 (48%)</td></tr>
                            <tr><td class="border px-4 py-2">Median Previous Lines (range)</td><td class="border px-4 py-2">2 (1-4)</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="abstract-card">
                <h2 class="abstract-section-title">Safety Summary</h2>
                 <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li>Loncastuximab was generally well tolerated.</li>
                    <li>The observed safety profile was consistent with known adverse events (AEs).</li>
                    <li>All 27 patients experienced at least one treatment-emergent AE (TEAE), mostly Grade 1 or 2.</li>
                    <li>Grade 3 TEAEs occurred in 16 patients, and Grade 4 TEAEs in 2 patients.</li>
                    <li>Dose reductions were required in 3 patients.</li>
                    <li>One patient discontinued treatment after cycle 4 due to cholestatic hepatitis, which subsequently resolved.</li>
                    <li><strong>Most common TEAEs (any grade):</strong> Maculopapular rash, increased AST, increased ALT, increased ALP, neutropenia, local edema, photosensitivity, anemia, urinary infection, lung infection, pleural effusion, anorexia, COVID-19, weight loss, hyponatremia.</li>
                </ul>
            </div>

            <div class="abstract-card md:col-span-2">
                <h2 class="abstract-section-title">Efficacy (Evaluable N=26)</h2>
                <p class="text-sm mb-1">As of February 10, 2025, 26 patients were evaluable for response. Median follow-up was 12.2 months (range 1-31).</p>
                <div class="chart-container mb-6">
                    <svg id="loncaResponseChart" width="350" height="280"></svg>
                    <div id="loncaResponseLegend" class="legend"></div>
                </div>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li><strong>Overall Response Rate (ORR): 85% (22/26)</strong>
                        <ul class="list-circle list-inside ml-4">
                            <li>Complete Response (CR): 69% (18/26)</li>
                            <li>Partial Response (PR): 16% (4/26)</li>
                        </ul>
                    </li>
                     <li>Lonca led to CR in 8 of 13 patients (62%) with POD24 who were assessed for response.</li>
                    <li>One patient who had progressed after CAR-T cell therapy achieved a CR with Lonca.</li>
                    <li><strong>Duration of Response:</strong>
                        <ul class="list-circle list-inside ml-4">
                            <li>CR is currently maintained in 17 of 18 patients.</li>
                            <li>The rate of ongoing CR at 18 months is 83%.</li>
                            <li>Longest duration of CR is 27 months.</li>
                            <li>One patient with EMZL relapsed 17.5 months after achieving CR.</li>
                            <li>Median duration of CR (mDOR-CR): 13.7 months.</li>
                            <li>Median duration of CR/PR (mDOR): 13.2 months, with 20 of 22 responses ongoing.</li>
                        </ul>
                    </li>
                    <li><strong>Progression-Free Survival (PFS):</strong> The PFS rate at 12 months was 91.7%.</li>
                    <li><strong>Overall Survival (OS):</strong> All 27 patients were alive at the time of data cutoff.</li>
                </ul>
            </div>
            
            <div class="abstract-card md:col-span-2">
                <h2 class="abstract-section-title">Summary & Conclusion</h2>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li>Loncastuximab tesirine demonstrates clinically meaningful activity with a robust CR rate in patients with R/R MZL.</li>
                    <li>The treatment was well tolerated, and the safety profile was consistent with known toxicities, supporting its favorable benefit-risk profile in this population.</li>
                    <li>Patients demonstrated durable CRs, but longer follow-up is needed to confirm these promising results.</li>
                </ul>
            </div>
            
            <div class="abstract-card md:col-span-2">
                 <h2 class="abstract-section-title">Abbreviations</h2>
                <p class="text-xs">ADC: Antibody-Drug Conjugate; AE: Adverse Event; ALP: Alkaline Phosphatase; ALT: Alanine Aminotransferase; AST: Aspartate Aminotransferase; CR: Complete Response; EMZL: Extranodal Marginal Zone Lymphoma; IV: Intravenous; Lonca: Loncastuximab tesirine; mDOR: Median Duration of Response; MZL: Marginal Zone Lymphoma; NCT: National Clinical Trial; NMZL: Nodal Marginal Zone Lymphoma; ORR: Overall Response Rate; OS: Overall Survival; PET-CT: Positron Emission Tomography-Computed Tomography; PFS: Progression-Free Survival; POD24: Progression of Disease within 24 months; PR: Partial Response; PS: Performance Status; Q3W: Every 3 Weeks; R/R: Relapsed/Refractory; SMZL: Splenic Marginal Zone Lymphoma; TEAE: Treatment-Emergent Adverse Event.</p>
            </div>

            <div class="abstract-card md:col-span-2">
                <h2 class="abstract-section-title">Reference</h2>
                <p id="referenceSectionContent">Lossos IS, Shouse G, Lucas K, et al. Updated analysis of a phase 2 multicenter study of loncastuximab in relapsed/refractory marginal zone lymphoma demonstrates high rate of complete responses. Abstract #PXXX presented at the European Hematology Association (EHA) Congress. 12–15 June 2025, Milan, Italy.</p>
            </div>
        </div>
        
        <div class="abstract-footer-info">
            <p>EHA 2025 Congress | Abstract #PXXX (Placeholder) | Presentation Date: June 12-15, 2025</p>
            <p>For Research & Informational Purposes Only.</p>
        </div>
    </div>
    <script defer src="abstract_features.js"></script>
    <script>
        function drawLoncaResponseChart(containerId, legendContainerId) {
            // Data for N=26 evaluable patients
            const crRate = 69;  // 18/26
            const prRate = 16;  // 4/26 (ORR 85% - CRR 69%)
            const orrTotal = crRate + prRate; // 85%
            const noResponseRate = 100 - orrTotal; // 15% (PD/Other/NR)

            const chartData = {
                keys: ["CR", "PR", "No Response/PD"], 
                values: { 
                    CR: crRate, 
                    PR: prRate, 
                    "No Response/PD": noResponseRate 
                }, 
                colors: ["var(--sobi-teal)", "var(--sobi-yellow)", "var(--sobi-medium-gray-text)"],
                orr: orrTotal
            };
            const chartTitle = "Best Overall Response (N=26)";

            const svg = d3.select(containerId);
            const legendContainer = d3.select(legendContainerId);

            svg.selectAll("*").remove();
            legendContainer.selectAll("*").remove();

            let containerWidth = 350; 
            const chartWrapper = svg.node() ? svg.node().closest('.chart-container') : null;
            if (chartWrapper) {
                containerWidth = Math.max(chartWrapper.getBoundingClientRect().width * 0.85, 280);
            }
            
            const svgWidth = containerWidth;
            const svgHeight = +svg.attr("height"); 

            const margin = { top: 40, right: 20, bottom: 30, left: 50 };
            const chartWidth = svgWidth - margin.left - margin.right;
            const chartHeight = svgHeight - margin.top - margin.bottom;

            if (chartWidth <= 0 || chartHeight <= 0) return;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const categories = ["Response"];
            const stack = d3.stack().keys(chartData.keys.filter(key => chartData.values[key] > 0));
            const stackedData = stack([chartData.values]);

            const xScale = d3.scaleBand()
                .domain(categories)
                .range([0, chartWidth])
                .padding(0.6); // Adjusted padding for a single bar

            const yScale = d3.scaleLinear()
                .domain([0, 100])
                .range([chartHeight, 0]);

            g.append("g")
                .attr("transform", `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale).tickValues([])) // No ticks for "Response" label
                .select(".domain").remove();

            g.append("g")
                .call(d3.axisLeft(yScale).ticks(5).tickFormat(d => d + "%"))
                .selectAll("text")
                .attr("class", "axis-text")
                .style("font-size", "10px");
            
            g.append("g")			
                .attr("class", "grid")
                .call(d3.axisLeft(yScale)
                    .ticks(5)
                    .tickSize(-chartWidth)
                    .tickFormat("")
                )
                .selectAll("line")
                .style("stroke", "var(--sobi-border-color)") // Use SOBI border color for grid
                .style("stroke-opacity", "0.7");

            const color = d3.scaleOrdinal()
                .domain(chartData.keys)
                .range(chartData.colors);

            g.selectAll(".serie")
                .data(stackedData)
                .enter().append("g")
                  .attr("class", "serie")
                .selectAll("rect")
                .data(d => d)
                .enter().append("rect")
                    .attr("x", d => xScale(categories[0]))
                    .attr("y", d => yScale(d[1]))
                    .attr("height", d => Math.max(0, yScale(d[0]) - yScale(d[1]))) // Ensure height is not negative
                    .attr("width", xScale.bandwidth())
                    .attr("fill", (d, i, nodes) => {
                        const seriesKey = d3.select(nodes[i].parentNode).datum().key;
                        return color(seriesKey);
                    })
                    .attr("rx", 3).attr("ry", 3);
            
            // Add text labels inside bars
            stackedData.forEach((series) => {
                series.forEach((d) => {
                    const y0 = d[0];
                    const y1 = d[1];
                    const percentage = y1 - y0;
                    if (percentage > 4) { 
                        g.append("text")
                            .attr("class", "chart-label")
                            .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                            .attr("y", yScale(y0 + percentage / 2) + 4) // Center text in bar segment
                            .attr("text-anchor", "middle")
                            .style("fill", (series.key === 'CR' && percentage > 15) ? "white" : "var(--sobi-dark-text)") 
                            .style("font-size", "10px")
                            .style("font-weight", "bold")
                            .text(`${percentage.toFixed(0)}%`); // Use toFixed(0) for whole numbers if preferred
                    }
                });
            });

            // Add ORR label above the bar
             if (chartData.orr) {
                 g.append("text")
                    .attr("class", "chart-label orr-label")
                    .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                    .attr("y", yScale(chartData.orr) - 8) // Position above the highest part of the bar
                    .attr("text-anchor", "middle")
                    .style("font-weight", "600")
                    .style("font-size", "10px")
                    .style("fill", "var(--sobi-dark-blue)")
                    .text(`ORR: ${chartData.orr.toFixed(0)}%`);
            }
            
            // Chart Title
            svg.append("text")
                .attr("x", svgWidth / 2)
                .attr("y", margin.top / 2 + 5) // Adjust title position
                .attr("text-anchor", "middle")
                .style("font-size", "13px")
                .style("font-weight", "600")
                .style("fill", "var(--sobi-dark-blue)")
                .text(chartTitle);

            // Legend
            const legendData = chartData.keys.filter(key => chartData.values[key] > 0).map(key => ({
                label: `${key} (${chartData.values[key].toFixed(0)}%)`,
                color: color(key)
            }));

            const legendItems = legendContainer.selectAll(".legend-item")
                .data(legendData).enter().append("div").attr("class", "legend-item");
            legendItems.append("div").attr("class", "legend-color-box").style("background-color", d => d.color);
            legendItems.append("span").text(d => d.label);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const debouncedDrawChartLonca = debounce(() => drawLoncaResponseChart("#loncaResponseChart", "#loncaResponseLegend"), 250);
        
        window.addEventListener('resize', debouncedDrawChartLonca);
        
        document.addEventListener('DOMContentLoaded', () => {
            debouncedDrawChartLonca();
        });
        // Fallback if DOMContentLoaded already fired
        if (document.readyState === "complete" || document.readyState === "interactive") {
             setTimeout(debouncedDrawChartLonca, 0); 
        }
    </script>
</body>
</html>