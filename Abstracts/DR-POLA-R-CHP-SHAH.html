<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="study:id" content="dr-pola-r-chp-shah">
    <meta name="study:title" content="PB3250 - Dose-reduced Pola-R-CHP for frontline treatment of diffuse large B-cell lymphoma in elderly and comorbid patients">
    <meta name="study:fileName" content="Abstracts/DR-POLA-R-CHP-SHAH.html">
    <meta name="study:cancerTypes" content="DLBCL,LBCL,B-NHL">
    <meta name="study:lineOfTherapy" content="1L">
    <meta name="study:evidenceType" content="Real-world evidence">
    <meta name="study:drugs" content="Polatuzumab Vedotin,Rituximab,ADC,Monoclonal Antibody,Chemotherapy,CIT,Pola-R-CHP">

    <title>PB3250: Dose-Reduced Pola-R-CHP for 1L DLBCL in Elderly/Comorbid Pts (SOBI Themed)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="abstract_styles.css"> 
</head>
<body class="abstract-page-body"> 
    <div class="slide-container">
        <div class="visual-abstract-container">
            <h2 class="visual-abstract-title">Visual Summary: PB3250 - Dose-Reduced Pola-R-CHP in Elderly/Comorbid 1L DLBCL</h2>
            <div class="visual-abstract-grid">
                <div class="visual-abstract-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-teal)">
                        <path d="M12 6.096c-1.058 0-2.02.468-2.704 1.248-.685.78-.996 1.788-.996 2.856s.311 2.076.996 2.856C9.98 13.84 10.942 14.31 12 14.31s2.02-.468 2.704-1.248.996-1.788.996-2.856-.311-2.076-.996-2.856C14.02 6.564 13.058 6.096 12 6.096zM12 12.81c-.53 0-1.008-.222-1.352-.588-.344-.366-.528-.852-.528-1.422s.184-1.056.528-1.422C10.992 9.012 11.47 8.79 12 8.79s1.008.222 1.352.588.528.852.528 1.422-.184-1.056-.528 1.422C13.008 12.588 12.53 12.81 12 12.81zm6.708 3.672A7.47 7.47 0 0012.024 15c-1.404 0-2.706.39-3.816 1.056A4.476 4.476 0 004.5 19.686V21h15v-1.314a4.476 4.476 0 00-3.792-3.624zM6.024 16.56c.84-.468 1.848-.768 2.904-.924A5.928 5.928 0 0112.024 15a5.928 5.928 0 013.096.636c1.056.156 2.064.456 2.904.924A2.988 2.988 0 0019.5 18.018V19.5h-15v-1.482a2.988 2.988 0 001.524-2.458zM4.5 7.032c0-1.068.312-2.076.996-2.856S7.2 3 8.256 3A7.47 7.47 0 0112.024 1.5c1.404 0 2.706.39 3.816 1.056A4.476 4.476 0 0119.5 6.186V7.5H4.5v-.468zM18 4.56c-.84.468-1.848.768-2.904-.924A5.928 5.928 0 0012.024 6a5.928 5.928 0 00-3.096.636 7.524 7.524 0 00-2.904.924A2.988 2.988 0 014.5 7.482V6H3V4.5A1.5 1.5 0 014.5 3h15A1.5 1.5 0 0121 4.5V6h-1.5v1.482a2.988 2.988 0 01-1.524 2.458L18 4.56z" />
                    </svg>
                    <h4>Population & Aim (N=16)</h4>
                    <p>Elderly (â‰¥70y) & comorbid (CCI â‰¥2) 1L DLBCL pts. Aim: Efficacy & safety of dr-Pola-R-CHP.</p>
                </div>
                <div class="visual-abstract-item">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-teal)">
                        <path fill-rule="evenodd" d="M10.5 3.75a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75V4.5h3A2.25 2.25 0 0118.75 6.75v1.5a2.25 2.25 0 01-2.25 2.25H15.5V12h1.25a.75.75 0 010 1.5H15.5v1.5h.75a.75.75 0 010 1.5H15.5v1.5H18a.75.75 0 010 1.5h-2.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0v-3A2.25 2.25 0 016 14.25v-1.5A2.25 2.25 0 018.25 10.5H9.5V9H8.25A2.25 2.25 0 016 6.75v-1.5A2.25 2.25 0 018.25 3H10.5V3.75zm-1.5 6.75h6V6.75H9V10.5z" clip-rule="evenodd" />
                    </svg>
                    <h4>Intervention</h4>
                    <p>Dose-reduced Pola-R-CHP (Cyclophosphamide 375-600mg/mÂ², Doxorubicin 25-40mg/mÂ²) for 6 cycles q21d.</p>
                </div>
                <div class="visual-abstract-item">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-orange)">
                        <path d="M3 13.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 13.5zM3 8.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 8.25zM3 18.75a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 18.75zM20.25 3a.75.75 0 00-.75.75v16.5a.75.75 0 001.5 0V3.75a.75.75 0 00-.75-.75z" />
                        <path fill-rule="evenodd" d="M9.97 4.28a.75.75 0 01.75-.75H12a.75.75 0 01.75.75v10.174l3.108-3.293a.75.75 0 111.084 1.038l-4.5 4.75a.75.75 0 01-1.084 0l-4.5-4.75a.75.75 0 111.084-1.038L9.97 14.454V4.28z" clip-rule="evenodd" />
                    </svg>
                    <h4>Key Efficacy (N=16)</h4>
                    <p>ORR: <span class="highlight-value">100%</span>CRR: <span class="highlight-value">75%</span> 6-mo PFS: 80.4%</p>
                </div>
                <div class="visual-abstract-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-orange)">
                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.092 14.444a.75.75 0 01-.092 0l-3.75-3.75a.75.75 0 111.06-1.06L12 14.813l3.182-3.182a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-.53.22z" clip-rule="evenodd" />
                    </svg>
                    <h4>Safety & Conclusion</h4>
                    <p>Gr 3-4 AEs in 68.75%. Effective & safe option; outcomes best with RDI >40%. Higher CCI linked to more AEs.</p>
                </div>
            </div>
        </div>

        <div class="text-center mb-8">
            <h1 class="abstract-header-title">PB3250: Dose-reduced Pola-R-CHP for frontline treatment of diffuse large B-cell lymphoma in elderly and comorbid patients</h1>
            <p class="abstract-sub-header">Kunal Shah, Paul Forrest, Anjana Sreedhar, Amy Sun, Cosmin Tegla, John Vaughn, Marc Braunstein, Anne Renteria, Jonathan Gerber, Catherine Diefenbach, Oscar Lahoud</p>
            <p class="abstract-meta-info mt-2">EHA Library PB3250 | Abstract Release: 05/14/25 | Presentation: 06/12/2025</p>
        </div>

        <div class="grid md:grid-cols-2 gap-x-8 gap-y-6">
            <div>
                <div class="abstract-card">
                    <h2 class="abstract-section-title">Background</h2>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                        <li>POLARIX: Pola-R-CHP improved PFS vs R-CHOP in 1L intermediate/high-risk DLBCL.</li>
                        <li>R-miniCHOP used for older/frail DLBCL pts, but CRR 62%, 2yr PFS 47%.</li>
                        <li>Unmet need for better tolerated, effective options for elderly/comorbid DLBCL.</li>
                        <li>This study retrospectively explored dose-reduced Pola-R-CHP (dr-Pola-R-CHP) in this population.</li>
                    </ul>
                </div>

                <div class="abstract-card">
                    <h2 class="abstract-section-title">Aims</h2>
                    <p class="text-sm mb-1">To investigate the efficacy and safety of dr-Pola-R-CHP in the frontline treatment of elderly (â‰¥70 years) and comorbid (CCI â‰¥2) DLBCL patients.</p>
                </div>

                <div class="abstract-card">
                    <h2 class="abstract-section-title">Methods & Study Design</h2>
                     <ul class="list-disc list-inside text-sm space-y-1 mb-3 pl-2">
                        <li>Retrospective analysis (NYU Langone Health, Aug 2022-Oct 2024).</li>
                        <li>Pts: Aged â‰¥70 years, newly diagnosed DLBCL, CCI scores â‰¥2.</li>
                        <li>Treatment: dr-Pola-R-CHP for 6 cycles (q21d).
                            <ul class="list-circle list-inside ml-4">
                                <li>Cyclophosphamide: 375-600 mg/m<sup>2</sup> (average)</li>
                                <li>Doxorubicin: 25-40 mg/m<sup>2</sup> (average)</li>
                                <li>Standard Polatuzumab, Rituximab, Prednisone.</li>
                            </ul>
                        </li>
                        <li>Relative Dose Intensity (RDI) calculated for cyclophosphamide & doxorubicin.</li>
                        <li>Outcomes: PFS, CRR, ORR, OS, Gr 3-4 AEs, deaths.</li>
                        <li>Data cutoff: Feb 25, 2025.</li>
                    </ul>
                    <div class="study-design-schema">
                        <h3 class="schema-title">dr-Pola-R-CHP Study Overview (Retrospective)</h3>
                        <div class="schema-step">
                            <strong>Patient Cohort (N=16)</strong>
                            <span>Aged â‰¥70y, DLBCL, CCI â‰¥2</span>
                            <span>Treated Aug 2022 - Oct 2024</span>
                        </div>
                        <div class="schema-arrow-down">â–¼</div>
                        <div class="schema-step">
                            <strong>Treatment Received</strong>
                            <span>Dose-Reduced Pola-R-CHP x 6 cycles (q21d)</span>
                            <span>(Cyclophosphamide 375-600mg/mÂ², Doxorubicin 25-40mg/mÂ²)</span>
                            <span>(Standard Pola, R, P)</span>
                        </div>
                        <div class="schema-arrow-down">â–¼</div>
                        <div class="schema-assessment-points">
                           <span>Efficacy (ORR, CRR, PFS, OS)</span>
                           <span>Safety (Gr 3-4 AEs, Deaths)</span>
                           <span>RDI Analysis</span>
                           <span>Outcome Predictors</span>
                        </div>
                         <div class="text-center mt-3 text-xs text-gray-600">Data Cutoff: Feb 25, 2025. Median f/u 6.7 months.</div>
                    </div>
                </div>
            </div>

            <div>
                 <div class="abstract-card">
                    <h2 class="abstract-section-title">Patient Characteristics (N=16)</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr><th>Characteristic</th><th>Value</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Median Age, years (range)</td><td>75 (70-89)</td></tr>
                                <tr><td>Male, n (%)</td><td>10 (62.5%)</td></tr>
                                <tr><td>Non-Germinal Center Histology, n (%)</td><td>11 (68.75%)</td></tr>
                                <tr><td>ECOG PS â‰¥2, n (%)</td><td>5 (31.25%)</td></tr>
                                <tr><td>Lugano Stage â‰¥3, n (%)</td><td>13 (81.25%)</td></tr>
                                <tr><td>IPI Score â‰¥2, n (%)</td><td>16 (100%)</td></tr>
                                <tr><td>Median CCI Score (range)</td><td>6 (3-9)</td></tr>
                                <tr><td>Key Comorbidities, n (%)</td><td></td></tr>
                                <tr><td class="pl-4">Coronary Artery Disease</td><td>8 (50%)</td></tr>
                                <tr><td class="pl-4">Type II Diabetes</td><td>8 (50%)</td></tr>
                                <tr><td class="pl-4">COPD</td><td>4 (25%)</td></tr>
                                <tr><td class="pl-4">Solid Tumor/Lymphoma History</td><td>4 (25%)</td></tr>
                                <tr><td class="pl-4">Heart Failure</td><td>3 (18.75%)</td></tr>
                                <tr><td class="pl-4">Chronic Kidney Disease</td><td>3 (18.75%)</td></tr>
                                <tr><td class="pl-4">Atrial Fibrillation</td><td>3 (18.75%)</td></tr>
                                <tr><td class="pl-4">Connective Tissue Disease</td><td>2 (12.5%)</td></tr>
                                <tr><td>Median RDI (Cyclophos. & Doxorubicin), % (range)</td><td>51% (34-80%)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="abstract-card">
                    <h2 class="abstract-section-title">Efficacy Results (N=16)</h2>
                    <p class="text-xs meta-info mb-2">Median follow-up: 6.7 months (range 2.8-22.9)</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <div class="infographic-item orange-theme">
                            <div class="infographic-icon icon-orange">ðŸ“Š</div>
                            <div class="infographic-value">100%</div>
                            <div class="infographic-label">Overall Response Rate (ORR)</div>
                        </div>
                        <div class="infographic-item teal-theme">
                            <div class="infographic-icon icon-teal">ðŸŽ¯</div>
                            <div class="infographic-value">75%</div>
                            <div class="infographic-label">Complete Response Rate (CRR)</div>
                        </div>
                    </div>
                    
                    <div class="chart-container mb-6">
                        <svg id="drPolaRCHPResponseChart" width="350" height="300"></svg>
                        <div id="drPolaRCHPResponseLegend" class="legend"></div>
                    </div>

                    <h3 class="abstract-sub-section-title">Survival Outcomes</h3>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2 mb-3">
                        <li>Median PFS: Not Reached</li>
                        <li>6-month PFS Rate: 80.4% (95% CI 50.6-93.2%)</li>
                        <li>Median OS: Not Reached</li>
                        <li>6-month OS Rate: 85.71% (95% CI 53.94-96.22%)</li>
                    </ul>
                    <div class="km-plot-container text-center">
                        <img src="https://placehold.co/600x300/E0F2F7/0A2F5C?text=Figure+1a:+PFS+and+OS+Curves" alt="Placeholder for Kaplan-Meier curves for PFS and OS">
                        <p class="text-xs meta-info mt-1">Figure 1a: Overall survival and progression-free survival (Placeholder - actual image from abstract needed).</p>
                    </div>

                    <h3 class="abstract-sub-section-title mt-4">Relative Dose Intensity (RDI) vs. Response</h3>
                     <p class="text-sm mb-2">CRR was 0% in patients with â‰¤40% RDI vs 85.7% with >40% RDI.</p>
                    <div class="chart-container mb-6">
                        <svg id="rdiResponseChart" width="400" height="250"></svg>
                        </div>
                     <p class="text-xs meta-info text-center">Figure 1b: CRR by RDI categories (Illustrative - based on abstract description).</p>
                </div>
                
                <div class="abstract-card">
                    <h2 class="abstract-section-title">Safety Summary (N=16)</h2>
                    <p class="text-sm mb-2">Total of 20 Grade 3-4 AEs occurred in 11 patients (68.75%).</p>
                    <div class="table-container">
                        <h3 class="abstract-sub-section-title text-center">Frequency of Grade 3-5 Adverse Events (Figure 1c Data)</h3>
                        <p class="text-sm text-center py-4"><i>Detailed Grade 3-5 AE breakdown from Figure 1c to be populated here based on image. Abstract text mentions 20 Grade 3-4 AEs in 68.75% of patients.</i></p>
                        <!-- Example structure if data was available:
                        <table>
                            <thead><tr><th>Adverse Event</th><th>Grade 3 (n)</th><th>Grade 4 (n)</th><th>Grade 5 (n)</th></tr></thead>
                            <tbody>
                                <tr><td>Neutropenia</td><td>X</td><td>Y</td><td>Z</td></tr>
                                <tr><td>Febrile Neutropenia</td><td>X</td><td>Y</td><td>Z</td></tr>
                                 ... etc. ...
                            </tbody>
                        </table>
                        -->
                    </div>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2 mt-3">
                        <li>Three patients had early treatment discontinuation (1 death included).</li>
                        <li>One additional death from infection after treatment completion.</li>
                        <li>Higher CCI per point was associated with Grade 3-4 AEs (OR 3.29, 95% CI 1.02-25.87, p=0.043) in univariable analysis.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="abstract-card mt-6">
            <h2 class="abstract-section-title">Summary & Conclusion</h2>
            <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                <li>First US-based study exploring dr-Pola-R-CHP in elderly/comorbid DLBCL patients.</li>
                <li>Limited by sample size and follow-up, data suggests dr-Pola-R-CHP is an <strong class="highlight">effective and safe therapy</strong>.</li>
                <li>Demonstrated ORR and CRR similar to historical Pola-R-CHP.</li>
                <li>Outcomes were best for those who received >40% Relative Dose Intensity (RDI).</li>
                <li>Higher Charlson Comorbidity Index (CCI) per point correlated with increased Grade 3-4 AEs.</li>
                <li>Findings support dr-Pola-R-CHP as a treatment option in this patient population.</li>
            </ul>
        </div>

        <div class="abstract-card mt-6 abbreviations-list">
            <h2 class="abstract-section-title">Abbreviations</h2>
            <p>
                1L, First-line; AE, Adverse Event; ADC, Antibody-Drug Conjugate; C, Cyclophosphamide (or Cycle); CCI, Charlson Comorbidity Index; CHP, Cyclophosphamide, Doxorubicin, Prednisone; CI, Confidence Interval; CIT, Chemoimmunotherapy; CR, Complete Response; CRR, Complete Response Rate; DLBCL, Diffuse Large B-Cell Lymphoma; dr, dose-reduced; ECOG PS, Eastern Cooperative Oncology Group Performance Status; FL, Follicular Lymphoma; G, Grade; GCB, Germinal Center B-cell like; H, Doxorubicin (Hydroxydaunorubicin); HGBCL, High-Grade B-Cell Lymphoma; IPI, International Prognostic Index; IV, Intravenous; KM, Kaplan-Meier; LBCL, Large B-Cell Lymphoma; mos, months; NE, Not Estimable; NHL, Non-Hodgkin Lymphoma; O, Vincristine (Oncovin); OR, Odds Ratio; ORR, Overall Response Rate; OS, Overall Survival; P, Prednisone; PD, Progressive Disease; PFS, Progression-Free Survival; Pola, Polatuzumab Vedotin; PO, Per Os (by mouth); PR, Partial Remission; Pts, Patients; R, Rituximab; RDI, Relative Dose Intensity; R/R, Relapsed/Refractory; SD, Stable Disease; SOC, Standard of Care; TCRBCL, T-Cell/Histiocyte-Rich Large B-Cell Lymphoma; TEAE, Treatment-Emergent Adverse Event; Tx, Treatment; V, Vincristine.
            </p>
        </div>

        <div class="abstract-card mt-6 reference-section">
            <h2 class="abstract-section-title">
                Reference
                <button id="copyReferenceBtn" class="copy-reference-button" title="Copy Reference">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-1.5">
                        <path d="M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.121A1.5 1.5 0 0117 6.621V16.5a1.5 1.5 0 01-1.5 1.5h-7A1.5 1.5 0 017 16.5v-13z" />
                        <path d="M4.5 6A1.5 1.5 0 003 7.5v10A1.5 1.5 0 004.5 19h7a1.5 1.5 0 001.5-1.5v-2.5a.75.75 0 00-1.5 0v2.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-10a.5.5 0 01.5-.5h2.5a.75.75 0 000-1.5H4.5z" />
                    </svg>
                    Copy
                </button>
            </h2>
            <p id="referenceSectionContent">
                Shah K, Forrest P, Sreedhar A, et al. Dose-reduced Pola-R-CHP for frontline treatment of diffuse large B-cell lymphoma in elderly and comorbid patients. Abstract #PB3250 presented at European Haematology Association (EHA) June 12â€“15, 2025.
            </p>
        </div>

        <div class="abstract-footer-info">
            <p>EHA Library PB3250 | Presentation Date: 06/12/2025 | Data Cutoff: Feb 25, 2025</p>
            <p>For Research & Informational Purposes Only.</p>
        </div>
    </div>
    <script defer src="abstract_features.js"></script> 
    <script>
        function drawStackedBarChart(containerId, legendContainerId, chartData, chartTitle) {
            const svg = d3.select(containerId);
            const legendContainer = d3.select(legendContainerId);

            svg.selectAll("*").remove();
            legendContainer.selectAll("*").remove();

            let containerWidth = 350;
            const chartWrapper = svg.node() ? svg.node().closest('.chart-container') : null;
            if (chartWrapper) {
                containerWidth = chartWrapper.getBoundingClientRect().width * 0.8; 
            }
            containerWidth = Math.max(containerWidth, 250);

            const svgWidth = containerWidth;
            const svgHeight = +svg.attr("height");

            const margin = { top: 40, right: 20, bottom: 50, left: 60 }; 
            const chartWidth = svgWidth - margin.left - margin.right;
            const chartHeight = svgHeight - margin.top - margin.bottom;

            if (chartWidth <= 0 || chartHeight <=0) return;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const categories = ["Response"]; 
            const stack = d3.stack().keys(chartData.keys);
            const stackedData = stack([chartData.values]);

            const xScale = d3.scaleBand()
                .domain(categories)
                .range([0, chartWidth])
                .padding(0.7); 

            const yScale = d3.scaleLinear()
                .domain([0, 100]) 
                .range([chartHeight, 0]);

            g.append("g")
                .attr("transform", `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale).tickValues([])) 
                .select(".domain").remove(); 

            g.append("g")
                .call(d3.axisLeft(yScale).ticks(5).tickFormat(d => d + "%"))
                .selectAll("text")
                .attr("class", "axis-text")
                .style("font-size", "10px");
            
            g.append("g")			
                .attr("class", "grid")
                .call(d3.axisLeft(yScale)
                    .ticks(5)
                    .tickSize(-chartWidth)
                    .tickFormat("")
                )
                .selectAll("line")
                .style("stroke", "#e0e0e0")
                .style("stroke-opacity", "0.7");

            const color = d3.scaleOrdinal()
                .domain(chartData.keys)
                .range(chartData.colors);

            g.selectAll(".serie")
                .data(stackedData)
                .enter().append("g")
                  .attr("class", "serie")
                .selectAll("rect")
                .data(d => d) 
                .enter().append("rect")
                    .attr("x", d => xScale(categories[0]))
                    .attr("y", d => yScale(d[1]))
                    .attr("height", d => yScale(d[0]) - yScale(d[1]))
                    .attr("width", xScale.bandwidth())
                    .attr("fill", (d, i, nodes) => { 
                        const seriesKey = d3.select(nodes[i].parentNode).datum().key;
                        return color(seriesKey);
                    })
                    .attr("rx", 3).attr("ry", 3);
            
            stackedData.forEach((series) => {
                series.forEach((d) => { 
                    const y0 = d[0];
                    const y1 = d[1];
                    const percentage = y1 - y0;
                    if (percentage > 4) { 
                        g.append("text")
                            .attr("class", "chart-label")
                            .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                            .attr("y", yScale(y0 + percentage / 2) + 4) 
                            .attr("text-anchor", "middle")
                            .style("fill", (series.key === "CR") ? "white" : "var(--sobi-dark-blue)") 
                            .style("font-size", "10px")
                            .text(`${percentage.toFixed(1)}%`);
                    }
                });
            });

            if (chartData.orr) {
                 g.append("text")
                    .attr("class", "chart-label")
                    .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                    .attr("y", yScale(chartData.orr) - 12) 
                    .attr("text-anchor", "middle")
                    .style("font-weight", "600")
                    .style("fill", "var(--sobi-dark-blue)")
                    .text(`ORR: ${chartData.orr.toFixed(1)}%`);
            }
            
            svg.append("text")
                .attr("x", svgWidth / 2)
                .attr("y", margin.top / 2 + 5)
                .attr("text-anchor", "middle")
                .style("font-size", "13px")
                .style("font-weight", "600")
                .style("fill", "var(--sobi-dark-blue)")
                .text(chartTitle);

            const legendData = chartData.keys.map(key => {
                if (chartData.values[key] > 0) { 
                    return {
                        label: `${key} (${chartData.values[key].toFixed(1)}%)`,
                        color: color(key)
                    };
                }
                return null;
            }).filter(item => item !== null); 

            const legendItems = legendContainer.selectAll(".legend-item")
                .data(legendData).enter().append("div").attr("class", "legend-item");
            legendItems.append("div").attr("class", "legend-color-box").style("background-color", d => d.color);
            legendItems.append("span").text(d => d.label);
        }
        
        // Data for dr-Pola-R-CHP Response Chart (N=16)
        // ORR: 100%, CRR: 75% => PRR = 25%. SD/PD = 0%
        const drPolaRCHPResponseData = {
            keys: ["CR", "PR"], 
            values: { 
                CR: 75.0, 
                PR: 25.0 
            }, 
            colors: ["var(--sobi-teal)", "var(--sobi-yellow)"],
            orr: 100.0 
        };

        // Data for RDI vs Response Chart (Illustrative based on abstract text)
        // CRR 0% for RDI <=40% vs 85.7% with >40% RDI
        const rdiResponseData = [
            { group: "RDI â‰¤40%", crr: 0, color: "var(--sobi-medium-gray-text)" },
            { group: "RDI >40%", crr: 85.7, color: "var(--sobi-teal)" }
        ];

        function drawRdiResponseChart() {
            const svg = d3.select("#rdiResponseChart");
            svg.selectAll("*").remove(); // Clear previous chart

            const containerWidth = svg.node().getBoundingClientRect().width || 400;
            const svgWidth = containerWidth;
            const svgHeight = +svg.attr("height");

            const margin = {top: 30, right: 20, bottom: 70, left: 50}; // Increased bottom for angled labels
            const chartWidth = svgWidth - margin.left - margin.right;
            const chartHeight = svgHeight - margin.top - margin.bottom;

            if (chartWidth <=0 || chartHeight <=0) return;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const xScale = d3.scaleBand()
                .domain(rdiResponseData.map(d => d.group))
                .range([0, chartWidth])
                .padding(0.4);

            const yScale = d3.scaleLinear()
                .domain([0, 100])
                .range([chartHeight, 0]);

            g.append("g")
                .attr("transform", `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale))
                .selectAll("text")
                  .attr("class", "axis-text")
                  .style("text-anchor", "end")
                  .attr("dx", "-.8em")
                  .attr("dy", ".15em")
                  .attr("transform", "rotate(-35)");


            g.append("g")
                .call(d3.axisLeft(yScale).ticks(5).tickFormat(d => d + "%"))
                .selectAll("text")
                .attr("class", "axis-text");
            
            g.append("g")			
                .attr("class", "grid")
                .call(d3.axisLeft(yScale)
                    .ticks(5)
                    .tickSize(-chartWidth)
                    .tickFormat("")
                )
                .selectAll("line")
                .style("stroke", "#e0e0e0")
                .style("stroke-opacity", "0.7");

            g.selectAll(".bar")
                .data(rdiResponseData)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", d => xScale(d.group))
                .attr("y", d => yScale(d.crr))
                .attr("width", xScale.bandwidth())
                .attr("height", d => chartHeight - yScale(d.crr))
                .attr("fill", d => d.color)
                .attr("rx", 3).attr("ry", 3);

            g.selectAll(".bar-label")
                .data(rdiResponseData)
                .enter().append("text")
                .attr("class", "chart-label")
                .attr("x", d => xScale(d.group) + xScale.bandwidth() / 2)
                .attr("y", d => yScale(d.crr) - 5)
                .attr("text-anchor", "middle")
                .style("fill", "var(--sobi-dark-text)")
                .text(d => `${d.crr.toFixed(1)}%`);
            
             svg.append("text")
                .attr("x", svgWidth / 2)
                .attr("y", margin.top / 2 + 5)
                .attr("text-anchor", "middle")
                .style("font-size", "13px")
                .style("font-weight", "600")
                .style("fill", "var(--sobi-dark-blue)")
                .text("CRR by Relative Dose Intensity (RDI)");
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const debouncedDrawDrPolaRCHPChart = debounce(() => drawStackedBarChart("#drPolaRCHPResponseChart", "#drPolaRCHPResponseLegend", drPolaRCHPResponseData, "Overall Response (N=16)"), 250);
        const debouncedDrawRDIChart = debounce(drawRdiResponseChart, 250);
        
        window.addEventListener('resize', () => {
            debouncedDrawDrPolaRCHPChart();
            debouncedDrawRDIChart();
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            debouncedDrawDrPolaRCHPChart();
            debouncedDrawRDIChart();
        });
        if (document.readyState === "complete" || document.readyState === "interactive") {
             setTimeout(() => {
                debouncedDrawDrPolaRCHPChart();
                debouncedDrawRDIChart();
             }, 0); 
        }
    </script>
</body>
</html>
