<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="study:id" content="selinexor-repoch-hiv-dlbcl-wang">
    <meta name="study:title" content="PB3227 - Selinexor in combination with R-EPOCH for patients with previously untreated HIV-associated DLBCL: A single-center, prospective, single-arm trial">
    <meta name="study:fileName" content="Abstracts/SELINEXOR-REPOCH-HIV-DLBCL-WANG.html">
    <meta name="study:cancerTypes" content="DLBCL,LBCL,B-NHL"> <meta name="study:lineOfTherapy" content="1L">
    <meta name="study:evidenceType" content="Clinical trial"> <meta name="study:drugs" content="Selinexor,XPO1 inhibitor,Rituximab,Monoclonal Antibody,Etoposide,Doxorubicin,Vinblastine,Prednisone,Cyclophosphamide,Chemotherapy,CIT,R-EPOCH,cART">

    <title>PB3227: Selinexor + R-EPOCH (XR-EPOCH) in 1L HIV-DLBCL (Wang) - SOBI Themed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="abstract_styles.css">
</head>
<body class="abstract-page-body">
    <div class="slide-container">
        <div class="visual-abstract-container">
            <h2 class="visual-abstract-title">Visual Summary: PB3227 - Selinexor + R-EPOCH (XR-EPOCH) in 1L HIV-Associated DLBCL</h2>
            <div class="visual-abstract-grid">
                <div class="visual-abstract-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-teal)"> <path d="M12 6.096c-1.058 0-2.02.468-2.704 1.248-.685.78-.996 1.788-.996 2.856s.311 2.076.996 2.856C9.98 13.84 10.942 14.31 12 14.31s2.02-.468 2.704-1.248.996-1.788.996-2.856-.311-2.076-.996-2.856C14.02 6.564 13.058 6.096 12 6.096zM12 12.81c-.53 0-1.008-.222-1.352-.588-.344-.366-.528-.852-.528-1.422s.184-1.056.528-1.422C10.992 9.012 11.47 8.79 12 8.79s1.008.222 1.352.588.528.852.528 1.422-.184-1.056-.528 1.422C13.008 12.588 12.53 12.81 12 12.81zm6.708 3.672A7.47 7.47 0 0012.024 15c-1.404 0-2.706.39-3.816 1.056A4.476 4.476 0 004.5 19.686V21h15v-1.314a4.476 4.476 0 00-3.792-3.624zM6.024 16.56c.84-.468 1.848-.768 2.904-.924A5.928 5.928 0 0112.024 15a5.928 5.928 0 013.096.636c1.056.156 2.064.456 2.904.924A2.988 2.988 0 0019.5 18.018V19.5h-15v-1.482a2.988 2.988 0 001.524-2.458zM4.5 7.032c0-1.068.312-2.076.996-2.856S7.2 3 8.256 3A7.47 7.47 0 0112.024 1.5c1.404 0 2.706.39 3.816 1.056A4.476 4.476 0 0119.5 6.186V7.5H4.5v-.468zM18 4.56c-.84.468-1.848.768-2.904-.924A5.928 5.928 0 0012.024 6a5.928 5.928 0 00-3.096.636 7.524 7.524 0 00-2.904.924A2.988 2.988 0 014.5 7.482V6H3V4.5A1.5 1.5 0 014.5 3h15A1.5 1.5 0 0121 4.5V6h-1.5v1.482a2.988 2.988 0 01-1.524 2.458L18 4.56z" />
                    </svg>
                    <h4>Population & Aim (N=10)</h4>
                    <p>Untreated HIV+ DLBCL. Aim: Evaluate efficacy/safety of Selinexor + R-EPOCH (XR-EPOCH) with cART.</p>
                </div>
                <div class="visual-abstract-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-teal)"> <path fill-rule="evenodd" d="M10.5 3.75a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75V4.5h3A2.25 2.25 0 0118.75 6.75v1.5a2.25 2.25 0 01-2.25 2.25H15.5V12h1.25a.75.75 0 010 1.5H15.5v1.5h.75a.75.75 0 010 1.5H15.5v1.5H18a.75.75 0 010 1.5h-2.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0V18h-1.5v1.5a.75.75 0 01-1.5 0v-3A2.25 2.25 0 016 14.25v-1.5A2.25 2.25 0 018.25 10.5H9.5V9H8.25A2.25 2.25 0 016 6.75v-1.5A2.25 2.25 0 018.25 3H10.5V3.75zm-1.5 6.75h6V6.75H9V10.5z" clip-rule="evenodd" />
                    </svg>
                    <h4>Intervention (XR-EPOCH)</h4>
                    <p>Selinexor (60mg D1,8,15) + R-EPOCH (q3wks). Concomitant cART. Median 5 cycles.</p>
                </div>
                <div class="visual-abstract-item">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-orange)"> <path d="M3 13.5a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 13.5zM3 8.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 8.25zM3 18.75a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 18.75zM20.25 3a.75.75 0 00-.75.75v16.5a.75.75 0 001.5 0V3.75a.75.75 0 00-.75-.75z" />
                        <path fill-rule="evenodd" d="M9.97 4.28a.75.75 0 01.75-.75H12a.75.75 0 01.75.75v10.174l3.108-3.293a.75.75 0 111.084 1.038l-4.5 4.75a.75.75 0 01-1.084 0l-4.5-4.75a.75.75 0 111.084-1.038L9.97 14.454V4.28z" clip-rule="evenodd" />
                    </svg>
                    <h4>Key Efficacy (N=10)</h4>
                    <p>ORR: <span class="highlight-value">100%</span><br>CRR: <span class="highlight-value">80%</span> (8/10)<br>2-yr PFS/OS: 85.7%</p>
                </div>
                <div class="visual-abstract-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="var(--sobi-orange)"> <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-.092 14.444a.75.75 0 01-.092 0l-3.75-3.75a.75.75 0 111.06-1.06L12 14.813l3.182-3.182a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-.53.22z" clip-rule="evenodd" />
                    </svg>
                    <h4>Safety & Conclusion</h4>
                    <p>Manageable safety. G3/4 Neutropenia (80%). Favorable efficacy. HIV RNA ↓ to 0. CD4 recovery.</p>
                </div>
            </div>
        </div>

        <div class="text-center mb-8">
            <h1 class="abstract-header-title">PB3227 - Selinexor in combination with R-EPOCH for patients with previously untreated HIV-associated DLBCL: A single-center, prospective, single-arm trial</h1>
            <p class="abstract-sub-header">Chaoyu Wang, Yixing Zhou, Chensi Zeng, et al.</p>
            <p class="abstract-meta-info mt-2">EHA 2025 Congress | Abstract #PB3227 | Publication Only</p>
        </div>

        <div class="grid md:grid-cols-2 gap-x-8 gap-y-6">
            <div>
                <div class="abstract-card">
                    <h2 class="abstract-section-title">Background</h2>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                        <li>People with HIV are up to 17x more likely to develop lymphoma; DLBCL is most common in cART era.</li>
                        <li>Selinexor (XPO1 inhibitor) has anti-HIV activity and synergy with anti-lymphoma drugs.</li>
                        <li>Impact of Selinexor + R-EPOCH in HIV-DLBCL is largely unknown.</li>
                    </ul>
                </div>

                <div class="abstract-card">
                    <h2 class="abstract-section-title">Aims</h2>
                    <p class="text-sm mb-1">To evaluate the impact of cART combined with Selinexor + R-EPOCH (XR-EPOCH) chemotherapy regimen in HIV-positive DLBCL patients.</p>
                </div>

                <div class="abstract-card">
                    <h2 class="abstract-section-title">Methods & Study Design</h2>
                    <ul class="list-disc list-inside text-sm space-y-1 mb-3 pl-2">
                        <li>Single-center, prospective, single-arm trial (ChiCTR2300069941).</li>
                        <li>Intervention: Selinexor (60mg Days 1, 8, 15) + R-EPOCH (Rituximab 375 mg/m² D1; Etoposide 50 mg/m² D1-4; Doxorubicin 10mg/m² D1-4; Vinblastine 0.4mg/m² D1-4; Prednisone 60mg/m² D1-5; Cyclophosphamide 750mg/m² D5) every 3 weeks.</li>
                        <li>All patients received concomitant cART.</li>
                         <li>Primary endpoints not explicitly stated in abstract text for this interim analysis (study aims to evaluate safety & efficacy).</li>
                    </ul>
                    <div class="study-design-schema">
                        <h3 class="schema-title">XR-EPOCH Treatment Approach in HIV-DLBCL</h3>
                        <div class="schema-enrollment">
                            <strong>Eligible Patients (N=10 Enrolled)</strong>
                            <span>Untreated HIV-Associated DLBCL</span>
                        </div>
                        <div class="schema-arrow-down">▼</div>
                        <div class="schema-phase-group">
                            <div class="schema-phase">
                                <strong>XR-EPOCH + cART (q3wks)</strong>
                                <span>Selinexor: 60mg (D1, 8, 15)</span>
                                <span>R-EPOCH: Standard Dosing</span>
                                <span>(Median 5 cycles received)</span>
                            </div>
                        </div>
                         <div class="schema-arrow-down">▼</div>
                        <div class="schema-phase-group">
                            <div class="schema-phase" style="background-color: var(--sobi-light-gray-bg); border-color: var(--sobi-dark-blue);">
                                <strong>Consolidation (Optional)</strong>
                                <span>3 Pts received ASCT post-remission</span>
                            </div>
                        </div>
                        <div class="schema-assessment-points">
                           <span>Response (ORR, CRR)</span>
                           <span>Safety (TEAEs)</span>
                           <span>PFS, OS</span>
                           <span>HIV RNA Load, CD4 Count</span>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <div class="abstract-card">
                    <h2 class="abstract-section-title">Patient Characteristics (N=10)</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr><th>Characteristic</th><th>Value</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Median Age, years (range)</td><td>47 (40-67)</td></tr>
                                <tr><td>Male, n (%)</td><td>8 (80%)</td></tr>
                                <tr><td>Advanced Stage (III/IV implied), n (%)</td><td>9 (90%)</td></tr>
                                <tr><td>aaIPI Intermediate-High Risk, n (%)</td><td>7 (70%)</td></tr>
                                <tr><td>GCB Subtype, n (%)</td><td>7 (70%)</td></tr>
                                <tr><td>Elevated LDH, n (%)</td><td>6 (60%)</td></tr>
                                <tr><td>Median HIV RNA Load, IU/mL (range)</td><td>10,000 (0-90,600)</td></tr>
                                <tr><td>Median CD4 Cell Count, cells/µL (range)</td><td>172 (54-360)</td></tr>
                                <tr><td>CD4 < 200 cells/µL, n (%)</td><td>6 (60%)</td></tr>
                                <tr><td>HBV Positive, n (%)</td><td>3 (30%)</td></tr>
                                <tr><td>EBV Coinfection, n (%)</td><td>2 (20%)</td></tr>
                                <tr><td>p53 Positive >15%, n (%)</td><td>10 (100%)</td></tr>
                                <tr><td>p53 Positive >50%, n (%)</td><td>7 (70%)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                 <div class="abstract-card">
                    <h2 class="abstract-section-title">Molecular Findings (NGS, N=9)</h2>
                    <p class="text-sm mb-2">Top 5 most frequently mutated genes (≥33%):</p>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                        <li>TP53: 67% (6/9)</li>
                        <li>FAT1: 33% (3/9)</li>
                        <li>GNA13: 33% (3/9)</li>
                        <li>MYC: 33% (3/9)</li>
                        <li>PAX5: 33% (3/9)</li>
                        <li>PCLO: 33% (3/9)</li>
                    </ul>
                    <p class="text-sm mt-2">Other mutations (22%): ARID2, ATM, BCR.</p>
                    <p class="text-xs meta-info mt-1">(Adapted from Figure a in abstract image)</p>
                </div>


                <div class="abstract-card">
                    <h2 class="abstract-section-title">Efficacy Results (N=10)</h2>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2 mb-3">
                        <li>Median cycles of XR-EPOCH: 5 (range 3-6).</li>
                        <li>3 patients received ASCT as consolidation.</li>
                        <li><strong>Overall Response Rate (ORR): 100%</strong></li>
                        <li>Complete Response (CR): 80% (8 patients)</li>
                        <li>Partial Response (PR): 20% (2 patients)</li>
                        <li>2-year PFS Rate: 85.7%</li>
                        <li>2-year OS Rate: 85.7%</li>
                    </ul>
                    <div class="chart-container mb-6">
                        <svg id="xrEpochResponseChart" width="350" height="280"></svg>
                        <div id="xrEpochResponseLegend" class="legend"></div>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div class="km-plot-container zoomable-image-container">
                            <img src="https://storage.googleapis.com/generativeai-downloads/ESH2025/PB3227_PFS_KM.png" alt="Progression-Free Survival Kaplan-Meier Curve" class="zoomable-image" onerror="this.onerror=null; this.src='https://placehold.co/400x300/E0F2F7/0A2F5C?text=PFS+Curve+Not+Available';">
                            <p class="text-xs text-center mt-1">2-Year Progression-Free Survival (Adapted from Abstract Figure b)</p>
                        </div>
                        <div class="km-plot-container zoomable-image-container">
                             <img src="https://storage.googleapis.com/generativeai-downloads/ESH2025/PB3227_OS_KM.png" alt="Overall Survival Kaplan-Meier Curve" class="zoomable-image" onerror="this.onerror=null; this.src='https://placehold.co/400x300/FFF0E5/0A2F5C?text=OS+Curve+Not+Available';">
                            <p class="text-xs text-center mt-1">2-Year Overall Survival (Adapted from Abstract Figure b)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grid md:grid-cols-2 gap-x-8 gap-y-6 mt-6">
            <div class="abstract-card">
                <h2 class="abstract-section-title">Safety Summary (N=10)</h2>
                <p class="text-sm mb-2">All patients experienced ≥1 TEAE. Most common Grade 3/4 hematological AEs:</p>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2 safety-table">
                    <li>Neutropenia: 80% (8 patients)</li>
                    <li>Febrile Neutropenia: 40% (4 patients)</li>
                    <li>Thrombocytopenia: 40% (4 patients)</li>
                    <li>Anemia: 10% (1 patient)</li>
                </ul>
            </div>
            <div class="abstract-card">
                <h2 class="abstract-section-title">HIV-Related Outcomes</h2>
                <p class="text-sm mb-2"><strong>CD4 Cell Count:</strong></p>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li>Most patients achieved immune function recovery (CD4 > 200 cells/µL) after 6 cycles.</li>
                    <li>One patient remained at low CD4 levels (<100 cells/µL).</li>
                    <li>(Adapted from Figure c in abstract image)</li>
                </ul>
                <p class="text-sm mt-3 mb-2"><strong>HIV RNA Load:</strong></p>
                <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                    <li>All patients had HIV RNA load decline to 0 after 4 cycles of XR-EPOCH or ASCT.</li>
                    <li>(Adapted from Figure d in abstract image)</li>
                </ul>
            </div>
        </div>


        <div class="abstract-card mt-6">
            <h2 class="abstract-section-title">Summary & Conclusion</h2>
            <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                <li>XR-EPOCH (Selinexor + R-EPOCH) demonstrated favorable efficacy and manageable safety in HIV-DLBCL patients receiving concomitant cART.</li>
            </ul>
        </div>

        <div class="abstract-card mt-6 abbreviations-list">
            <p>aaIPI, Age-Adjusted International Prognostic Index; AE, Adverse Event; ASCT, Autologous Stem Cell Transplantation; cART, Combined Antiretroviral Therapy; CD4, Cluster of Differentiation 4; CR, Complete Remission; CRR, Complete Response Rate; DLBCL, Diffuse Large B-Cell Lymphoma; EBV, Epstein-Barr Virus; EPOCH, Etoposide, Prednisone, Vincristine (Vinblastine in this study), Cyclophosphamide, Doxorubicin; GCB, Germinal Center B-cell like; HBV, Hepatitis B Virus; HIV, Human Immunodeficiency Virus; IPI, International Prognostic Index; IQR, Interquartile Range; LDH, Lactate Dehydrogenase; NGS, Next-Generation Sequencing; ORR, Overall Response Rate; OS, Overall Survival; PFS, Progression-Free Survival; PR, Partial Remission; q3wks, Every 3 weeks; R, Rituximab; RNA, Ribonucleic Acid; TEAE, Treatment-Emergent Adverse Event; XPO1, Exportin 1; XR-EPOCH, Selinexor + R-EPOCH.</p>
        </div>

        <div class="abstract-card mt-6 reference-section">
            <h2 class="abstract-section-title">
                Reference
                <button id="copyReferenceBtn" class="copy-reference-button" title="Copy Reference">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.121A1.5 1.5 0 0117 6.621V16.5a1.5 1.5 0 01-1.5 1.5h-7A1.5 1.5 0 017 16.5v-13z" />
                        <path d="M4.5 6A1.5 1.5 0 003 7.5v10A1.5 1.5 0 004.5 19h7a1.5 1.5 0 001.5-1.5v-2.5a.75.75 0 00-1.5 0v2.5a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-10a.5.5 0 01.5-.5h2.5a.75.75 0 000-1.5H4.5z" />
                    </svg>
                    Copy
                </button>
            </h2>
            <p id="referenceSectionContent">
                Wang C, Zhou Y, Zeng C, et al. Selinexor in combination with R-EPOCH for patients with previously untreated HIV-associated DLBCL: A single-center, prospective, single-arm trial. Abstract #PB3227 presented at European Haematology Association (EHA) June 12–15, 2025, Milan, Italy.
            </p>
        </div>

        <div class="abstract-footer-info">
            <p>EHA 2025 Congress | Abstract #PB3227 | Abstract Release: 05/14/2025 | Presentation: 06/12/2025</p>
            <p>ChiCTR2300069941 | For Research & Informational Purposes Only.</p>
        </div>
    </div>

    <script defer src="abstract_features.js"></script>
    <script>
        function drawResponseChartPB3227(containerId, legendContainerId) {
            // N=10: ORR 100%, CR 80% (8 Pts), PR 20% (2 Pts)
            const chartData = {
                keys: ["CR", "PR"], 
                values: { CR: 80.0, PR: 20.0 }, 
                colors: ["var(--sobi-teal)", "var(--sobi-yellow)"],
                orr: 100.0
            };
            const chartTitle = "Overall Response Rate (N=10)";

            const svg = d3.select(containerId);
            const legendContainer = d3.select(legendContainerId);

            svg.selectAll("*").remove();
            legendContainer.selectAll("*").remove();

            let containerWidth = 350; 
            const chartWrapper = svg.node() ? svg.node().closest('.chart-container') : null;
            if (chartWrapper) {
                containerWidth = Math.max(chartWrapper.getBoundingClientRect().width * 0.85, 280);
            }
            
            const svgWidth = containerWidth;
            const svgHeight = +svg.attr("height"); 

            const margin = { top: 40, right: 20, bottom: 30, left: 50 };
            const chartWidth = svgWidth - margin.left - margin.right;
            const chartHeight = svgHeight - margin.top - margin.bottom;

            if (chartWidth <= 0 || chartHeight <= 0) return;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const categories = ["Response"];
            const stack = d3.stack().keys(chartData.keys.filter(key => chartData.values[key] > 0));
            const stackedData = stack([chartData.values]);

            const xScale = d3.scaleBand()
                .domain(categories)
                .range([0, chartWidth])
                .padding(0.6);

            const yScale = d3.scaleLinear()
                .domain([0, 100])
                .range([chartHeight, 0]);

            g.append("g")
                .attr("transform", `translate(0,${chartHeight})`)
                .call(d3.axisBottom(xScale).tickValues([]))
                .select(".domain").remove();

            g.append("g")
                .call(d3.axisLeft(yScale).ticks(5).tickFormat(d => d + "%"))
                .selectAll("text")
                .attr("class", "axis-text")
                .style("font-size", "10px");
            
            g.append("g")			
                .attr("class", "grid")
                .call(d3.axisLeft(yScale)
                    .ticks(5)
                    .tickSize(-chartWidth)
                    .tickFormat("")
                )
                .selectAll("line")
                .style("stroke", "#e0e0e0")
                .style("stroke-opacity", "0.7");

            const color = d3.scaleOrdinal()
                .domain(chartData.keys)
                .range(chartData.colors);

            g.selectAll(".serie")
                .data(stackedData)
                .enter().append("g")
                  .attr("class", "serie")
                .selectAll("rect")
                .data(d => d)
                .enter().append("rect")
                    .attr("x", d => xScale(categories[0]))
                    .attr("y", d => yScale(d[1]))
                    .attr("height", d => Math.max(0, yScale(d[0]) - yScale(d[1])))
                    .attr("width", xScale.bandwidth())
                    .attr("fill", (d, i, nodes) => {
                        const seriesKey = d3.select(nodes[i].parentNode).datum().key;
                        return color(seriesKey);
                    })
                    .attr("rx", 3).attr("ry", 3);
            
            stackedData.forEach((series) => {
                series.forEach((d) => {
                    const y0 = d[0];
                    const y1 = d[1];
                    const percentage = y1 - y0;
                    if (percentage > 5) { 
                        g.append("text")
                            .attr("class", "chart-label")
                            .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                            .attr("y", yScale(y0 + percentage / 2) + 4)
                            .attr("text-anchor", "middle")
                            .style("fill", (series.key === 'CR' && percentage > 15) ? "white" : "var(--sobi-dark-text)") 
                            .style("font-size", "10px")
                            .style("font-weight", "bold")
                            .text(`${percentage.toFixed(0)}%`);
                    }
                });
            });
             if (chartData.orr) {
                 g.append("text")
                    .attr("class", "chart-label orr-label")
                    .attr("x", xScale(categories[0]) + xScale.bandwidth() / 2)
                    .attr("y", yScale(chartData.orr) - 8) 
                    .attr("text-anchor", "middle")
                    .style("font-weight", "600")
                    .style("font-size", "10px")
                    .style("fill", "var(--sobi-dark-blue)")
                    .text(`ORR: ${chartData.orr.toFixed(0)}%`);
            }
            
            svg.append("text")
                .attr("x", svgWidth / 2)
                .attr("y", margin.top / 2 + 5)
                .attr("text-anchor", "middle")
                .style("font-size", "13px")
                .style("font-weight", "600")
                .style("fill", "var(--sobi-dark-blue)")
                .text(chartTitle);

            const legendData = chartData.keys.filter(key => chartData.values[key] > 0).map(key => ({
                label: `${key} (${chartData.values[key].toFixed(0)}%)`,
                color: color(key)
            }));

            const legendItems = legendContainer.selectAll(".legend-item")
                .data(legendData).enter().append("div").attr("class", "legend-item");
            legendItems.append("div").attr("class", "legend-color-box").style("background-color", d => d.color);
            legendItems.append("span").text(d => d.label);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const debouncedDrawChartPB3227 = debounce(() => drawResponseChartPB3227("#xrEpochResponseChart", "#xrEpochResponseLegend"), 250);
        
        window.addEventListener('resize', debouncedDrawChartPB3227);
        
        document.addEventListener('DOMContentLoaded', () => {
            debouncedDrawChartPB3227();
        });
        if (document.readyState === "complete" || document.readyState === "interactive") {
             setTimeout(debouncedDrawChartPB3227, 0); 
        }
    </script>
</body>
</html>
